{% extends 'base.html' %}{% load static %}{% block css %}    <link rel="stylesheet" href="{%  static "css/progressbar.css" %}">    <link href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.0.3/css/font-awesome.css'>{% endblock css %}{% block content %} <section class="breadcrumb-area bg-img bg-overlay jarallax" style="background-image: url({% static "img/bg-img/13.jpg" %});">        <div class="container h-100">            <div class="row h-100 align-items-center">                <div class="col-12">                    <div class="breadcrumb-content">                        <h2>Loan Application</h2>                        <nav aria-label="breadcrumb">                            <ol class="breadcrumb">                                <li class="breadcrumb-item"><a href="#">Home</a></li>                                <li class="breadcrumb-item active" aria-current="page">Loan Application</li>                            </ol>                        </nav>                    </div>                </div>            </div>        </div>    </section>    <div class="container-fluid">    <div class="row justify-content-center">        <div class="col-11 col-sm-9 col-md-7 col-lg-6 col-xl-5 text-center p-0 mt-3 mb-2">            <div>                <h2 id="heading">Personal Information:</h2>                <form id="msform" method="post">                    {% csrf_token %}                    <br> <!-- fieldsets -->                    <fieldset>                        <div class="form-card">                            <label class="fieldlabels">ID Number: *</label>                            {{ c_form.id_num}}                            <label class="fieldlabels">Select Gender: *</label>                            {{ c_form.gender}}                            <br>                            <label class="fieldlabels">Date of Birth: *</label>                            {{ c_form.dob}}                            <label class="fieldlabels">Phone Number: *</label>                            {{ c_form.phone_no }}                            <label class="fieldlabels">Physical Address: *</label>                            {{ c_form.street }}                            {{ c_form.apartment }}                            <label class="fieldlabels">City: *</label>                            {{ c_form.city }}                            <label class="fieldlabels">Province: *</label>                            {{ c_form.province }}                        </div> <input type="submit" name="Submit" class="action-button" value="Submit" />                    </fieldset>                </form>            </div>        </div>    </div></div>{% endblock content %}{% block javascript %}    <script src=" {% static "js/myjavascript.js" %}"></script>    <script>    $("#add-document").click(function () {        var files = $('input[type="file"]')[0].files[0]        var description = $('input[name="description"]').val().trim()        var document_type = $('select[name="document_type"]').val().trim()        var data ={            'file': files,            'description': description,            'document_type':document_type        }        var form_data = new FormData();        form_data.append('file',files )        form_data.append('description', description)        form_data.append('document_type', document_type)        form_data.append('csrfmiddlewaretoken', $('input[name=csrfmiddlewaretoken]').val());        $.ajax({             url:"{% url 'save-document' %}",            data:form_data,            contentType: false,            processData: false,            type:'POST',            success: function(response){               if(response){                   $("#my_documents").show()                   $("#my_documents tbody").append(                       "<tr id='" + response.get_doc_id + "'><td>" + response.doc_type + "</td>" +                       "<td>" + response.name + "</td></tr>" +                       "<td> <input type='button' id='btn-" +response.get_doc_id + "' value='Remove' onclick='removeDocument("                       +response.get_doc_id+")' class='btn btn-default'/></td></tr>"                   )               }            }        });    })    function removeDocument(e){        var document_id = e        $.ajax({            url: '{% url 'loans:remove-document' %}',            data: {                'document_id': document_id            },            dataType: 'json',            success: function () {                $("#"+document_id).remove()                $("#btn-"+document_id).remove()            }        })    }    //Save loan details    $("#save-loan").click(function () {       var amount = $('input[name="amount"]').val().trim()        var loan = $('select[name="loan"]').val().trim()        var term = $('input[name="term"]').val().trim()        var monthly_payment = $('input[name="monthly_payment"]').val().trim()        var total_payment = $('input[name="total_payment"]').val().trim()        data = {            'amount': amount,            'loan': loan,            'term': term,            'monthly_payment': monthly_payment,            'total_payment':total_payment        }        if(amount && term && loan && total_payment && monthly_payment){            $.ajax({                method: 'POST',                url: '{% url "save-loan" %}',                data: data,                headers:{'X-CSRFToken': '{{ csrf_token }}'},                dataType:'json',                success: function (context) {                   if(context.error){                            alert("error occurred")                        }                        else {                           alert(context.message)                        }                }            })        }    })    //get calculations    $("#id_amount").change(function () {        var amount = $('input[name="amount"]').val().trim()        var loan = $('select[name="loan"]').val().trim()        var term = $('input[name="term"]').val().trim()        if( amount && term && loan){            $.ajax({                url: '/loan-management/get-loan/',                data: {                    'amount': amount,                    'term': term,                    'loan': loan                },                dataType: 'json',                success: function (context) {                    $('input[name="total_payment"]').val("R "+ context.for_frontend.total_payment)                    $('input[name="monthly_payment"]').val("R "+context.for_frontend.monthly_payment)                }            });        }        else{            if(amount == "" || term == "") {                $("#id_amount").fadeIn(function () {                    $("#loan_summary").hide()                })            }        }    })    </script>{% endblock javascript %}